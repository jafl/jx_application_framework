# configuration for compiling with g++

#
# Adjustable parameters
#

# This tells us where to find the X libraries.

J_X11_LIB_DIR := -L/usr/X11R6/lib

# Comment this out if your system is not ELF.

J_BUILD_SHARED_LIB := -fPIC
J_BEGIN_LINK_STATIC := -Xlinker -Bstatic
J_END_LINK_STATIC   := -Xlinker -Bdynamic

# This flag tells the linker to build a shared library.

J_SHARED_LIB_LINK_OPTION := -shared

# This specifies the suffix for shared libraries

J_SHARED_LIB_SUFFIX := so

# Uncomment this if your system requires separate .o files for
# static and shared libraries.  The actual value is not used.

# J_NEED_SEPARATE_O_FILES := yes

# This command is used to strip debugging info but not the symbol table.

J_STRIP_DEBUG := strip -g

# Comment this out if your version of "ar" does not accept the -s option.

J_RANLIB_VIA_AR_S := -D_J_RANLIB_VIA_AR_S

# Uncomment this if your version of "man" requires -s to specify the section.

# J_MAN_SECTION_VIA_DASH_S := -D_J_MAN_SECTION_VIA_DASH_S

# Uncomment this if you need to use readdir_r() instead of readdir().

# J_USE_READDIR_R := -DJ_USE_READDIR_R
# J_USE_READDIR_R := -DJ_USE_POSIX_READDIR_R

# Comment this out if you don't have Xinerama

J_HAS_XINERAMA  := -D_J_HAS_XINERAMA
J_XINERAMA_LIBS := -lXinerama

# Add to this until everything compiles.
#
# You must include "-DSIZEOF_LONG=N -DSIZEOF_INT=M"
# On most systems, N and M are both 4.  Check /usr/include/limits.h

J_RAW_SYSTEM_STUFF := \
  -DSIZEOF_INT=* -DSIZEOF_LONG=* -DSIZEOF_LONGLONG=* \
  -D_XFT_NO_COMPAT_ -I/usr/include/freetype2 \
  ${shell getconf LFS_CFLAGS}

SEARCHDIRS += -I/usr/include/freetype2

#
# Nothing below this line should ever need to be changed.
#

# makemake variables

LINKER := g++

# make variables

CC       := gcc
CXX      := g++
CPPFLAGS  = ${DEPENDFLAGS} ${J_OPTIMIZE_LEVEL}
CFLAGS    = 
CXXFLAGS  = -std=c++17

# libraries to link

J_GCC_LIBS  := ${shell PKG_CONFIG_PATH=${PKG_CONFIG_PATH} \
                 pkg-config --libs icu-i18n libpcre} \
               -lstdc++ -lpthread -lm -lc -ldl
J_ACE_LIBS  := -L${JX_ROOT}/lib -lACE
J_X11_LIBS  := -L${JX_ROOT}/lib ${J_X11_LIB_DIR} -lXext -lXft -lXpm -lX11

# lldb

J_LLDB_LIBS          := -L/usr/lib64/llvm -llldb
J_POST_LINK_LLDB_CMD := :

# modify settings based on OS, compiler, etc.

include ${JX_ROOT}/include/make/jx_config_common
