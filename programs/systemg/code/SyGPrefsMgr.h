/******************************************************************************
 SyGPrefsMgr.h

	Copyright (C) 1999 by Glenn W. Bach.  All rights reserved.

	Base code generated by Codemill v0.1.0

 *****************************************************************************/

#ifndef _H_SyGPrefsMgr
#define _H_SyGPrefsMgr

#include <JXPrefsManager.h>
#include <JPtrArray-JString.h>
#include <JFontStyle.h>

class JXStringHistoryMenu;
class SyGEditPrefsDialog;

enum
{
	kSProgramVersionID = 1,
	kSTreeOptionsID,
	kSAppID,
	kSChildWindowListID,
	kSDefaultWindowSizeID,
	kSgCSFSetupID,
	kSFilterVisibleID,
	kSEmpty4ID,
	kSEmpty5ID,
	kSMainToolBarID,
	kSEmpty8ID,
	kSEmpyt9ID,
	kSDelDeleteID,
	kSEmpty2ID,
	kSEmpty3ID,
	kSEmpty6ID,
	kSEmpty7ID,
	kSViewManPagePrefID,
	kSAltCSSetupID,
	kSFindFilePrefID,
	kSVersionCheckID,
	kSNewWindowsID,
	kSPerFolderPrefsID
};

const JSize kSyGTreePrefCount = 7;

class SyGPrefsMgr : public JXPrefsManager
{
public:

	SyGPrefsMgr(JBoolean* isNew);

	virtual	~SyGPrefsMgr();

	JString	GetSystemGVersionStr() const;

	void		GetTreePreferences(JBoolean prefs[]) const;
	void		SetTreePreferences(const JBoolean prefs[]);

	JBoolean	GetDefaultWindowSize(JSize* w, JSize* h) const;
	void		SaveDefaultWindowSize(const JSize w, const JSize h);

	JBoolean	GetFilterStatePref() const;
	void		SaveFilterStatePref(const JBoolean show);

	JBoolean	RestoreProgramState(JPtrArray<JString>* children);
	void		SaveProgramState(const JPtrArray<JString>& children);

	JBoolean	DelWillDelete() const;
	void		DelShouldDelete(const JBoolean del);

	JBoolean	WillOpenNewWindows() const;
	void		ShouldOpenNewWindows(const JBoolean newWindows);

	JBoolean	WillSaveFolderPrefs() const;
	void		ShouldSaveFolderPrefs(const JBoolean perFolder);

	void		EditPrefs();

protected:

	virtual void	UpgradeData(const JBoolean isNew, const JFileVersion currentVersion);
	virtual void	SaveAllBeforeDestruct();
	virtual void	Receive(JBroadcaster* sender, const Message& message);

private:

	SyGEditPrefsDialog*	itsDialog;

private:

	void	UpdatePrefs();

	// not allowed

	SyGPrefsMgr(const SyGPrefsMgr& source);
	const SyGPrefsMgr& operator=(const SyGPrefsMgr& source);

public:

	static const JCharacter* kPrefsChanged;

	class PrefsChanged : public JBroadcaster::Message
		{
		public:

			PrefsChanged()
				:
				JBroadcaster::Message(kPrefsChanged)
			{ };
		};
};

#endif
