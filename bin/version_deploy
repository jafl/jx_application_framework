#!/bin/sh

if [[ ! -d libjcore ]]; then
	echo "must be run in JX root";
	exit 1;
fi

if [[ $# < 1 ]]; then
	echo "usage: $0 program_name ...";
	exit 1;
fi

for P in $*; do

	NAME=${P##*/};

	if [[ ! -d programs/$NAME ]]; then
		echo "=== $NAME is not a directory";
		continue;
	fi

	if [[ ! -d programs/$NAME/release ]]; then
		echo "=== $NAME is not ready for release";
		continue;
	fi

	case $NAME in
		code_crusader)
			PROJ="codecrusader";;
		code_medic)
			PROJ="codemedic";;
		code_mill)
			PROJ="nps-codemill";;
		drakon)
			PROJ="drakon";;
		glove)
			PROJ="glove";;
		leibnitz)
			PROJ="leibnitz";;
		ssh_askpass)
			PROJ="nps-ssh-askpass";;
		svn_client)
			PROJ="nps-svnclient";;
		systemg)
			PROJ="nps-systemg";;
		*)
			echo "$NAME not found";
			exit 1;;
	esac;

	echo === $NAME;
	scp programs/$NAME/release/* jafl,$PROJ@web.sourceforge.net:htdocs/;
done

# css
echo === common files
scp -r doc/html/* jafl,libjx@web.sourceforge.net:htdocs/;
